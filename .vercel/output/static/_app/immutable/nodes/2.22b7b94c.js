import{f as qe,h as ce,i as Re,s as ke,n as U,e as $,o as Ye,a as Ze,j as F,b as ee,r as Fe,k as we}from"../chunks/scheduler.3139b196.js";import{y as Je,z as Ke,S as Xe,i as Qe,e as fe,a as O,f as E,g as w,s as A,m as G,h as x,j as D,A as N,c as H,n as q,k as j,x as h,o as Y,d as se,B as de,C as z,p as $e,t as et,b as tt,D as xe,E as Te}from"../chunks/index.e28029e5.js";import{e as J}from"../chunks/app.cec18116.js";import{w as ne}from"../chunks/index.cc4da14a.js";import{g as st}from"../chunks/navigation.6ee81ba0.js";const te=ne(!1),ue=ne(null);function lt(s){return s<.5?4*s*s*s:.5*Math.pow(2*s-2,3)+1}function Ee(s,{delay:e=0,duration:t=400,easing:l=lt,amount:n=5,opacity:o=0}={}){const r=getComputedStyle(s),i=+r.opacity,d=r.filter==="none"?"":r.filter,a=i*(1-o),[c,_]=qe(n);return{delay:e,duration:t,easing:l,css:(y,m)=>`opacity: ${i-a*m}; filter: ${d} blur(${m*c}${_});`}}function he(s){return Object.prototype.toString.call(s)==="[object Date]"}function le(s,e){if(s===e||s!==s)return()=>s;const t=typeof s;if(t!==typeof e||Array.isArray(s)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const l=e.map((n,o)=>le(s[o],n));return n=>l.map(o=>o(n))}if(t==="object"){if(!s||!e)throw new Error("Object cannot be null");if(he(s)&&he(e)){s=s.getTime(),e=e.getTime();const o=e-s;return r=>new Date(s+r*o)}const l=Object.keys(e),n={};return l.forEach(o=>{n[o]=le(s[o],e[o])}),o=>{const r={};return l.forEach(i=>{r[i]=n[i](o)}),r}}if(t==="number"){const l=e-s;return n=>s+n*l}throw new Error(`Cannot interpolate ${t} values`)}function pe(s,e={}){const t=ne(s);let l,n=s;function o(r,i){if(s==null)return t.set(s=r),Promise.resolve();n=r;let d=l,a=!1,{delay:c=0,duration:_=400,easing:y=Re,interpolate:m=le}=ce(ce({},e),i);if(_===0)return d&&(d.abort(),d=null),t.set(s=n),Promise.resolve();const v=Je()+c;let b;return l=Ke(g=>{if(g<v)return!0;a||(b=m(s,r),typeof _=="function"&&(_=_(s,r)),a=!0),d&&(d.abort(),d=null);const M=g-v;return M>_?(t.set(s=r),!1):(t.set(s=b(y(M/_))),!0)}),l.promise}return{set:o,update:(r,i)=>o(r(n,s),i),subscribe:t.subscribe}}function ve(s,e,t){const l=s.slice();return l[49]=e[t],l}function _e(s,e,t){const l=s.slice();return l[52]=e[t],l}function nt(s){let e,t,l,n='<img src="logo.png" alt="" class="svelte-1xdj161"/> <h1 class="svelte-1xdj161">TypeMaster</h1>',o,r,i,d,a,c,_,y,m,v,b='<div class="social-icon svelte-1xdj161"><a href="https://discord.gg/kXRaxUsdEk" target="_blank" class="svelte-1xdj161">Discord</a><i class="fa-brands fa-discord svelte-1xdj161"></i></div> <div class="social-icon svelte-1xdj161"><a href="https://github.com/firzalay/type-master" target="_blank" class="svelte-1xdj161">Github</a><i class="fa-brands fa-github svelte-1xdj161"></i></div> <div class="social-icon svelte-1xdj161"><a href="https://www.instagram.com/typemaster_/" target="_blank" class="svelte-1xdj161">Instagram</a><i class="fa-brands fa-instagram svelte-1xdj161"></i></div>';function g(p,C){return p[10]?it:ot}let M=g(s),k=M(s),u=s[2]!=="game over"&&me(s),T=s[2]==="game over"&&je(s);return{c(){e=w("div"),t=w("nav"),l=w("div"),l.innerHTML=n,o=A(),k.c(),r=A(),i=w("main"),d=w("div"),a=w("h3"),c=G(s[1]),_=A(),u&&u.c(),y=A(),T&&T.c(),m=A(),v=w("div"),v.innerHTML=b,this.h()},l(p){e=x(p,"DIV",{class:!0});var C=D(e);t=x(C,"NAV",{class:!0});var S=D(t);l=x(S,"DIV",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-1tezkm6"&&(l.innerHTML=n),o=H(S),k.l(S),S.forEach(E),r=H(C),i=x(C,"MAIN",{});var I=D(i);d=x(I,"DIV",{class:!0});var V=D(d);a=x(V,"H3",{class:!0});var W=D(a);c=q(W,s[1]),W.forEach(E),V.forEach(E),_=H(I),u&&u.l(I),y=H(I),T&&T.l(I),I.forEach(E),m=H(C),v=x(C,"DIV",{class:!0,"data-svelte-h":!0}),N(v)!=="svelte-q1co39"&&(v.innerHTML=b),C.forEach(E),this.h()},h(){j(l,"class","logo svelte-1xdj161"),j(t,"class","svelte-1xdj161"),j(a,"class","svelte-1xdj161"),j(d,"class","user svelte-1xdj161"),j(v,"class","social-media svelte-1xdj161"),j(e,"class","layout svelte-1xdj161")},m(p,C){O(p,e,C),h(e,t),h(t,l),h(t,o),k.m(t,null),h(e,r),h(e,i),h(i,d),h(d,a),h(a,c),h(i,_),u&&u.m(i,null),h(i,y),T&&T.m(i,null),h(e,m),h(e,v)},p(p,C){M===(M=g(p))&&k?k.p(p,C):(k.d(1),k=M(p),k&&(k.c(),k.m(t,null))),C[0]&2&&Y(c,p[1]),p[2]!=="game over"?u?u.p(p,C):(u=me(p),u.c(),u.m(i,y)):u&&(u.d(1),u=null),p[2]==="game over"?T?(T.p(p,C),C[0]&4&&se(T,1)):(T=je(p),T.c(),se(T,1),T.m(i,null)):T&&(T.d(1),T=null)},d(p){p&&E(e),k.d(),u&&u.d(),T&&T.d()}}}function rt(s){let e,t='<div class="loader svelte-1xdj161"></div> <h1 class="svelte-1xdj161">Wait Master üôèüèª</h1>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=x(l,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-40hadk"&&(e.innerHTML=t),this.h()},h(){j(e,"class","loader-layout svelte-1xdj161")},m(l,n){O(l,e,n)},p:U,d(l){l&&E(e)}}}function ot(s){let e,t='<a href="/leaderboards" class="svelte-1xdj161"><i class="fa-solid fa-crown svelte-1xdj161"></i></a> <a href="/login" class="svelte-1xdj161"><i class="fa-solid fa-right-to-bracket svelte-1xdj161"></i></a>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=x(l,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-m56hz2"&&(e.innerHTML=t),this.h()},h(){j(e,"class","nav-link svelte-1xdj161")},m(l,n){O(l,e,n)},p:U,d(l){l&&E(e)}}}function it(s){let e,t,l='<i class="fa-solid fa-crown svelte-1xdj161"></i>',n,o,r='<i class="fa-solid fa-right-to-bracket icon-flipped svelte-1xdj161"></i>',i,d;return{c(){e=w("div"),t=w("a"),t.innerHTML=l,n=A(),o=w("button"),o.innerHTML=r,this.h()},l(a){e=x(a,"DIV",{class:!0});var c=D(e);t=x(c,"A",{href:!0,class:!0,"data-svelte-h":!0}),N(t)!=="svelte-6jyb38"&&(t.innerHTML=l),n=H(c),o=x(c,"BUTTON",{class:!0,"data-svelte-h":!0}),N(o)!=="svelte-1uivnot"&&(o.innerHTML=r),c.forEach(E),this.h()},h(){j(t,"href","/leaderboards"),j(t,"class","svelte-1xdj161"),j(o,"class","svelte-1xdj161"),j(e,"class","nav-link svelte-1xdj161")},m(a,c){O(a,e,c),h(e,t),h(e,n),h(e,o),i||(d=z(o,"click",s[18]),i=!0)},p:U,d(a){a&&E(e),i=!1,d()}}}function me(s){let e,t,l,n,o,r,i=s[6],d,a,c,_='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke-width="1.5" stroke="currentColor" fill="none"><path stroke-linecap="round" stroke-linejoin="round" d="M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3"></path></svg>',y,m,v=be(s);return{c(){e=w("div"),t=w("input"),l=A(),n=w("div"),o=G(s[3]),r=A(),v.c(),d=A(),a=w("div"),c=w("button"),c.innerHTML=_,this.h()},l(b){e=x(b,"DIV",{class:!0,"data-game":!0});var g=D(e);t=x(g,"INPUT",{class:!0,type:!0}),l=H(g),n=x(g,"DIV",{class:!0});var M=D(n);o=q(M,s[3]),M.forEach(E),r=H(g),v.l(g),d=H(g),a=x(g,"DIV",{class:!0});var k=D(a);c=x(k,"BUTTON",{"aria-label":!0,"data-svelte-h":!0}),N(c)!=="svelte-hpqjj0"&&(c.innerHTML=_),k.forEach(E),g.forEach(E),this.h()},h(){j(t,"class","input svelte-1xdj161"),j(t,"type","text"),j(n,"class","time svelte-1xdj161"),j(c,"aria-label","reset"),j(a,"class","reset svelte-1xdj161"),j(e,"class","game svelte-1xdj161"),j(e,"data-game",s[2])},m(b,g){O(b,e,g),h(e,t),s[19](t),de(t,s[4]),h(e,l),h(e,n),h(n,o),h(e,r),v.m(e,null),h(e,d),h(e,a),h(a,c),y||(m=[z(t,"input",s[20]),z(t,"input",s[16]),z(t,"keydown",s[17]),z(c,"click",s[15])],y=!0)},p(b,g){g[0]&16&&t.value!==b[4]&&de(t,b[4]),g[0]&8&&Y(o,b[3]),g[0]&64&&ke(i,i=b[6])?($e(),et(v,1,1,U),tt(),v=be(b),v.c(),se(v,1),v.m(e,d)):v.p(b,g),g[0]&4&&j(e,"data-game",b[2])},d(b){b&&E(e),s[19](null),v.d(b),y=!1,Fe(m)}}}function ge(s){let e,t=s[52]+"",l;return{c(){e=w("span"),l=G(t),this.h()},l(n){e=x(n,"SPAN",{class:!0});var o=D(e);l=q(o,t),o.forEach(E),this.h()},h(){j(e,"class","letter svelte-1xdj161")},m(n,o){O(n,e,o),h(e,l)},p(n,o){o[0]&32&&t!==(t=n[52]+"")&&Y(l,t)},d(n){n&&E(e)}}}function ye(s){let e,t=J(s[49]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ge(_e(s,t,n));return{c(){e=w("span");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=x(n,"SPAN",{class:!0});var o=D(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(E),this.h()},h(){j(e,"class","word")},m(n,o){O(n,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,o){if(o[0]&32){t=J(n[49]);let r;for(r=0;r<t.length;r+=1){const i=_e(n,t,r);l[r]?l[r].p(i,o):(l[r]=ge(i),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&E(e),Te(l,n)}}}function be(s){let e,t,l,n,o=J(s[5]),r=[];for(let i=0;i<o.length;i+=1)r[i]=ye(ve(s,o,i));return{c(){e=w("div");for(let i=0;i<r.length;i+=1)r[i].c();t=A(),l=w("div"),this.h()},l(i){e=x(i,"DIV",{class:!0});var d=D(e);for(let a=0;a<r.length;a+=1)r[a].l(d);t=H(d),l=x(d,"DIV",{class:!0}),D(l).forEach(E),d.forEach(E),this.h()},h(){j(l,"class","caret svelte-1xdj161"),j(e,"class","words svelte-1xdj161")},m(i,d){O(i,e,d);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);h(e,t),h(e,l),s[21](l),s[22](e)},p(i,d){if(d[0]&32){o=J(i[5]);let a;for(a=0;a<o.length;a+=1){const c=ve(i,o,a);r[a]?r[a].p(c,d):(r[a]=ye(c),r[a].c(),r[a].m(e,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=o.length}},i(i){i&&(n||we(()=>{n=xe(e,Ee,{}),n.start()}))},o:U,d(i){i&&E(e),Te(r,i),s[21](null),s[22](null)}}}function je(s){let e,t,l,n="WPM",o,r,i=Math.trunc(s[12])+"",d,a,c,_,y="Accuracy",m,v,b=Math.trunc(s[11])+"",g,M,k,u,T="Play Agains",p,C,S;return{c(){e=w("div"),t=w("div"),l=w("p"),l.textContent=n,o=A(),r=w("div"),d=G(i),a=A(),c=w("div"),_=w("p"),_.textContent=y,m=A(),v=w("div"),g=G(b),M=G("%"),k=A(),u=w("button"),u.textContent=T,this.h()},l(I){e=x(I,"DIV",{class:!0});var V=D(e);t=x(V,"DIV",{});var W=D(t);l=x(W,"P",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-ci3cah"&&(l.textContent=n),o=H(W),r=x(W,"DIV",{class:!0});var Z=D(r);d=q(Z,i),Z.forEach(E),W.forEach(E),a=H(V),c=x(V,"DIV",{});var B=D(c);_=x(B,"P",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-1vj8ne8"&&(_.textContent=y),m=H(B),v=x(B,"DIV",{class:!0});var R=D(v);g=q(R,b),M=q(R,"%"),R.forEach(E),B.forEach(E),k=H(V),u=x(V,"BUTTON",{class:!0,"data-svelte-h":!0}),N(u)!=="svelte-1bqtvb3"&&(u.textContent=T),V.forEach(E),this.h()},h(){j(l,"class","title svelte-1xdj161"),j(r,"class","score svelte-1xdj161"),j(_,"class","title svelte-1xdj161"),j(v,"class","score svelte-1xdj161"),j(u,"class","play"),j(e,"class","results svelte-1xdj161")},m(I,V){O(I,e,V),h(e,t),h(t,l),h(t,o),h(t,r),h(r,d),h(e,a),h(e,c),h(c,_),h(c,m),h(c,v),h(v,g),h(v,M),h(e,k),h(e,u),C||(S=z(u,"click",s[15]),C=!0)},p(I,V){V[0]&4096&&i!==(i=Math.trunc(I[12])+"")&&Y(d,i),V[0]&2048&&b!==(b=Math.trunc(I[11])+"")&&Y(g,b)},i(I){I&&(p||we(()=>{p=xe(e,Ee,{}),p.start()}))},o:U,d(I){I&&E(e),C=!1,S()}}}function at(s){let e;function t(o,r){return o[0]?rt:nt}let l=t(s),n=l(s);return{c(){n.c(),e=fe()},l(o){n.l(o),e=fe()},m(o,r){n.m(o,r),O(o,e,r)},p(o,r){l===(l=t(o))&&n?n.p(o,r):(n.d(1),n=l(o),n&&(n.c(),n.m(e.parentNode,e)))},i:U,o:U,d(o){o&&E(e),n.d(o)}}}function ct(s,e){return Math.floor(s/5/e)}function ft(s,e,t){let l,n,o;$(s,ue,f=>t(29,l=f));let r=!0,i="",d="waiting for input",a=60,c="",_=[],y=0,m=0,v=0,b=!1,g=pe(0,{delay:300,duration:1e3});$(s,g,f=>t(12,o=f));let M=pe(0,{delay:1300,duration:1e3});$(s,M,f=>t(11,n=f));let k,u,T,p,C=0,S=0;function I(){t(6,b=!b),K("waiting for input"),oe(300),t(3,a=60),t(4,c=""),y=0,m=0,v=0,F(g,o=0,o),F(M,n=0,n),X()}function V(){S=new Date().getTime();const f=(S-C)/(1e3*60),L=ct(v,f);F(g,o=L,o);const P=W();F(M,n=P,n),l&&Oe(L,P)}function W(){const f=_.join(" "),L=T.value;for(let P=0;P<f.length&&P<L.length;P++)f[P]===L[P]&&v++;return Math.floor(v/f.length*300)}function Z(){B(),R(),Ce(),De(),Ve(),Ae()}function B(){m>_[y].length-1||(u=k.children[y].children[m])}function R(){const f=_[y][m];/[A-Za-z0-9]/.test(c)?c===f?(u.dataset.letter="correct",re()):u.dataset.letter="incorrect":(u.dataset.letter="incorrect",u.style.color="red")}function re(){v+=1}function Ce(){m+=1}function Me(){m>0?(m-=1,u=k.children[y].children[m],t(4,c=""),u.dataset.letter=""):y>0&&(y-=1,m=_[y].length-1,t(4,c=""),u=k.children[y].children[m],u.dataset.letter=""),He()}function Ie(){const f=m!==0,L=_[y].length===1;if(f||L){if(y<_.length){const ae=k.children[y].querySelectorAll(".letter");for(let Q=m;Q<ae.length;Q++)ae[Q].dataset.letter="skipped"}y+=1,m=0,re(),Le()}}function Le(){if(y<_.length){const f=k.children[y];m=0,t(9,p.style.top=`${f.children[m].offsetTop+4}px`,p),t(9,p.style.left=`${f.children[m].offsetLeft}px`,p)}}function De(){const f=k.children[y],L=k.getBoundingClientRect().y;f.getBoundingClientRect().y>L&&f.scrollIntoView({block:"center"})}function Ve(){t(4,c="")}function Ae(){t(9,p.style.top=`${u.offsetTop+4}px`,p),t(9,p.style.left=`${u.offsetLeft+u.offsetWidth}px`,p)}function He(){t(9,p.style.top=`${u.offsetTop+4}px`,p),t(9,p.style.left=`${u.offsetLeft}px`,p)}function Pe(){event.key.match(/^[A-Za-z0-9]$/)&&(K("in progress"),C=new Date().getTime(),Se())}function K(f){t(2,d=f)}function Se(){function f(){a>0&&t(3,a-=1),(d==="waiting for input"||a===0)&&clearInterval(L),a===0&&(V(),K("game over"))}const L=setInterval(f,1e3)}async function oe(f){const L=await fetch(`/api/words?limit=${f}`);t(5,_=await L.json())}function X(){T&&T.focus()}function Ne(){event.code==="Space"&&(event.preventDefault(),d==="in progress"&&Ie()),event.code==="Backspace"&&(event.preventDefault(),Me()),d==="waiting for input"&&Pe()}const Oe=async(f,L)=>{await fetch("https://typemaster.online/api/scores",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:l.id,wpm_score:f,accuracy:L}),credentials:"include"})},We=async()=>{await fetch("https://typemaster.online/api/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),await st("/"),location.reload()};Ye(async()=>{X(),oe(300);try{const L=await(await fetch("https://typemaster.online/api/user",{headers:{"Content-Type":"application/json"},credentials:"include"})).json();t(1,i=`Hello ${L.name} üñêüèª`),te.set(!0),ue.set(L)}catch{te.set(!1)}finally{t(0,r=!1)}}),Ze(()=>{X()});let ie=!1;te.subscribe(f=>t(10,ie=f));function Ue(f){ee[f?"unshift":"push"](()=>{T=f,t(8,T)})}function Be(){c=this.value,t(4,c)}function ze(f){ee[f?"unshift":"push"](()=>{p=f,t(9,p)})}function Ge(f){ee[f?"unshift":"push"](()=>{k=f,t(7,k)})}return[r,i,d,a,c,_,b,k,T,p,ie,n,o,g,M,I,Z,Ne,We,Ue,Be,ze,Ge]}class _t extends Xe{constructor(e){super(),Qe(this,e,ft,at,ke,{},null,[-1,-1])}}export{_t as component};
